<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>rod was here</title>
<style>
    :root{
        --bg-1:#000;
        --bg-2:#0a0a0a;
        --muted:#9ca3af;
        --card-border:#1f1f1f;
        --accent:#22c55e;
    }

    html,body{
        height:100%;
        margin:0;
        font-family: "Segoe UI", Roboto, system-ui, -apple-system, "Helvetica Neue", Arial;
        background: radial-gradient(circle at top, #0b0b0b 0%, #000 60%);
        color:#e5e7eb;
        -webkit-font-smoothing:antialiased;
        -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
        min-height:100%;
        display:flex;
        align-items:center;
        justify-content:center;
        padding:28px;
        box-sizing:border-box;
    }

    .card{
        width:100%;
        max-width:640px;
        background:linear-gradient(180deg,var(--bg-2),#070707);
        border-radius:16px;
        padding:28px;
        border:1px solid var(--card-border);
        box-shadow:0 10px 40px rgba(0,0,0,0.7), inset 0 0 18px rgba(255,255,255,0.01);
        box-sizing:border-box;
        animation:pop .28s ease;
    }

    @keyframes pop{
        from{opacity:0; transform:translateY(8px)}
        to{opacity:1; transform:translateY(0)}
    }

    h1{
        margin:0 0 6px;
        text-align:center;
        font-size:22px;
        background:linear-gradient(90deg,var(--accent),#4ade80);
        -webkit-background-clip:text;
        -webkit-text-fill-color:transparent;
    }

    .ticket-num{
        text-align:center;
        color:var(--muted);
        font-size:13px;
        margin-bottom:18px;
    }

    form{
        width:100%;
        display:block;
    }

    /* center form controls by giving them a max width and making them block + auto margin */
    label{
        display:block;
        text-align:center;             /* centered label text */
        color:var(--muted);
        font-size:13px;
        margin:8px 0 6px;
    }

    input[type="number"],
    input[type="text"],
    select,
    textarea,
    input[type="file"]{
        display:block;
        width:calc(100% - 40px);
        max-width:520px;              /* controls won't be full width of card, centered */
        margin:0 auto 10px;           /* center them */
        padding:11px 12px;
        border-radius:10px;
        border:1px solid #1f2937;
        background:#030712;
        color:#e5e7eb;
        outline:none;
        box-sizing:border-box;
        font-size:14px;
    }

    textarea{ min-height:120px; resize:vertical; }

    input[type="file"]{
        padding:9px 12px;
        cursor:pointer;
    }

    input:focus, textarea:focus, select:focus{
        border-color:var(--accent);
        box-shadow:0 0 12px rgba(34,197,94,0.16);
    }

    .controls{
        text-align:center;
        margin-top:16px;
    }

    button{
        -webkit-appearance:none;
        appearance:none;
        border:0;
        padding:12px 18px;
        border-radius:12px;
        font-weight:700;
        font-size:15px;
        cursor:pointer;
        background:linear-gradient(135deg,var(--accent),#16a34a);
        color:#000;
        box-shadow:0 8px 26px rgba(34,197,94,0.14);
        transition:transform .12s ease, box-shadow .12s ease;
        display:inline-block;
    }

    button:active{ transform:translateY(1px) }
    button[disabled]{ opacity:0.6; pointer-events:none }

    .status{
        text-align:center;
        margin-top:12px;
        min-height:20px;
        font-size:14px;
    }

    /* small screens: make inputs wider relative to viewport */
    @media (max-width:520px){
        input[type="number"],
        input[type="text"],
        select,
        textarea,
        input[type="file"]{
            width:calc(100% - 36px);
            max-width:100%;
        }
        .card{ padding:20px; border-radius:12px }
    }
</style>
</head>
<body>
<div class="wrap">
    <div class="card">
        <h1>hello, twin.</h1>

        <form id="ticketForm" autocomplete="off">
            <label for="roblox">Roblox User ID</label>
            <input id="roblox" type="number" required placeholder="Type here"/>

            <label for="discord">Discord ID</label>
            <input id="discord" type="text" required placeholder="Type here"/>

            <label for="type">Ticket Type</label>
            <select id="type" aria-label="Ticket Type">
                <option>Report</option>
                <option>Appeal</option>
                <option>Other</option>
            </select>

            <label for="info">Description</label>
            <textarea id="info" required placeholder="Whats up?"></textarea>

            <label for="files">Attachments (MAX 5)</label>
            <input id="files" type="file" multiple />

            <div class="controls">
                <button id="sendBtn" type="submit">Submit Ticket</button>
            </div>

            <div class="status" id="status"></div>
        </form>
    </div>
</div>

<script>
/* ========== config ========== */
const webhook = "https://discord.com/api/webhooks/1444946230068252714/afVwbXYYuYsecP6RESOpdzfSJ2qP7bFMPQKynHynbS-Uup-nwLTgTvnT-_ohTjjTmzBu";
const rateLimitMinutes = 5;
/* ============================ */

const form = document.getElementById("ticketForm");
const status = document.getElementById("status");
const ticketDisplay = document.getElementById("ticketDisplay");
const sendBtn = document.getElementById("sendBtn");

// ticket counter stored in localStorage
let ticketNum = parseInt(localStorage.getItem("ticketNum") || "1000", 10);
ticketNum = isNaN(ticketNum) ? 1000 : ticketNum;
ticketNum++;
ticketDisplay.textContent = "Ticket #" + ticketNum;

// rate-limit check
const lastSent = parseInt(localStorage.getItem("lastTicketTime") || "0", 10);
if (lastSent) {
    const diffMinutes = (Date.now() - lastSent) / 60000;
    if (diffMinutes < rateLimitMinutes) {
        const left = Math.ceil(rateLimitMinutes - diffMinutes);
        status.textContent = `‚è≥ Wait ${left} more minute(s) before sending another ticket.`;
        status.style.color = "orange";
        sendBtn.disabled = true;
    }
}

form.addEventListener("submit", async (e) => {
    e.preventDefault();
    status.textContent = "Sending ticket...";
    status.style.color = "#e5e7eb";

    const roblox = document.getElementById("roblox").value.trim();
    const discord = document.getElementById("discord").value.trim();
    const type = document.getElementById("type").value;
    const info = document.getElementById("info").value.trim();
    const files = document.getElementById("files").files;

    if (!roblox || !discord || !info) {
        status.textContent = "Please fill required fields.";
        status.style.color = "red";
        return;
    }

    if (files.length > 5) {
        status.textContent = "‚ùå Max 5 files only.";
        status.style.color = "red";
        return;
    }

    const formData = new FormData();

    const payload = {
        embeds: [{
            title: `üéüÔ∏è Ticket #${ticketNum}`,
            color: 0x22c55e,
            fields: [
                { name: "Roblox ID", value: roblox, inline: true },
                { name: "Discord", value: discord, inline: true },
                { name: "Type", value: type, inline: true },
                { name: "Description", value: info.substring(0,1024) }
            ],
            footer: { text: "Roblox Ticket System" },
            timestamp: new Date().toISOString()
        }]
    };

    formData.append("payload_json", JSON.stringify(payload));
    for (let i = 0; i < files.length; i++) formData.append(`file${i}`, files[i]);

    try {
        const res = await fetch(webhook, { method: "POST", body: formData });
        if (!res.ok) throw new Error("Webhook error: " + res.status);

        // persist state
        localStorage.setItem("lastTicketTime", Date.now().toString());
        localStorage.setItem("ticketNum", ticketNum.toString());

        status.textContent = `‚úÖ Ticket #${ticketNum} sent!`;
        status.style.color = "#22c55e";
        form.reset();
        sendBtn.disabled = true;
    } catch (err) {
        console.error(err);
        status.textContent = "‚ùå Failed to send ticket.";
        status.style.color = "red";
    }
});
</script>
</body>
</html>
